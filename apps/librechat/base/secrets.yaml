apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: librechat-secrets
spec:
  refreshInterval: "15s"
  secretStoreRef:
    name: vault-secret-store
    kind: ClusterSecretStore
  target:
    name: librechat-secrets
  dataFrom:
    - extract:
        key: secrets/librechat/librechat-secrets
        property: librechat-secrets.values

---
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: meilisearch-secrets
spec:
  refreshInterval: "15s"
  secretStoreRef:
    name: vault-secret-store
    kind: ClusterSecretStore
  target:
    name: meilisearch-secrets
  dataFrom:
    - extract:
        key: secrets/librechat/meilisearch-secrets
        property: meilisearch-secrets.values

---
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: vectordb-secrets
spec:
  refreshInterval: "15s"
  secretStoreRef:
    name: vault-secret-store
    kind: ClusterSecretStore
  target:
    name: vectordb-secrets
  dataFrom:
    - extract:
        key: secrets/librechat/vectordb-secrets
        property: vectordb-secrets.values

---
kind: Secret
apiVersion: v1
metadata:
  name: rag-api-secrets
stringData:
  DB_HOST: "vectordb"
  POSTGRES_DB: <path:kv/data/librechat/vectordb#POSTGRES_DB#2>
  POSTGRES_USER: <path:kv/data/librechat/vectordb#POSTGRES_USER#2>
  POSTGRES_PASSWORD: <path:kv/data/librechat/vectordb#POSTGRES_PASSWORD#2>
  DB_PORT: "5432"
  RAG_PORT: "8000"
  DEBUG_RAG_API: "true"
  EMBEDDINGS_PROVIDER: azure
  EMBEDDINGS_MODEL: <path:kv/data/librechat/rag-api#EMBEDDINGS_MODEL#2>
  RAG_AZURE_OPENAI_ENDPOINT: <path:kv/data/librechat/rag-api#RAG_AZURE_OPENAI_ENDPOINT#2>
  RAG_AZURE_OPENAI_API_VERSION: <path:kv/data/librechat/rag-api#RAG_AZURE_OPENAI_API_VERSION#2>
  RAG_AZURE_OPENAI_API_KEY: <path:kv/data/librechat/rag-api#RAG_AZURE_OPENAI_API_KEY#2>
  JWT_SECRET: <path:kv/data/librechat/librechat-client#JWT_SECRET#7>
